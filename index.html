<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live HTML Editor</title>

<!-- CodeMirror CSS -->
<link rel="stylesheet"
 href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css">
<link rel="stylesheet"
 href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/theme/material-darker.min.css">

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #1e1e1e;
    overflow: hidden;
}

.editor {
    height: calc(100vh - 40px);
    display: flex;
    padding: 12px;
    background: #e9edf3;
}

.code {
    width: 30%;
    min-width: 120px;
    border-radius: 8px;
    overflow: hidden;
}

.CodeMirror {
    height: 100%;
    font-size: 16px;
    background: #fafafa;      /* off white */
    color: #222;
}

.CodeMirror-gutters {
    background: #f0f0f0;
    border-right: 1px solid #ddd;
}

.CodeMirror-linenumber {
    color: #888;
}

.resizer {
    width: 6px;
    margin: 0 10px;
    cursor: col-resize;
    background: #444;
    border-radius: 3px;
}

.output {
    flex: 1;
    padding: 8px;
    background: #f5f7fa;
    border-radius: 8px;
}

iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: white;
    border-radius: 8px;
}

footer {
    height: 40px;
    background: #1e1e1e;
    color: #eee;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    font-size: 14px;
}

footer button {
    padding: 6px 14px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
}

#saveBtn { background: #4caf50; color: white; }
#saveBtn:hover { background: #43a047; }
</style>
</head>

<body>

<div class="editor">
    <div class="code">
        <textarea id="htmlCode"></textarea>
    </div>

    <div class="resizer" id="resizer"></div>

    <div class="output">
        <iframe id="preview"></iframe>
    </div>
</div>

<footer>
 <footer>
    Â© 2026 Â· Created by Abha Datar. All Rights Reserved.
    <button id="openBtn">ðŸ“‚ Open</button>
    <button id="saveBtn">ðŸ’¾ Save</button>
</footer>

</footer>

<!-- CodeMirror JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/xml/xml.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/addon/edit/closetag.min.js"></script>

<input 
  type="file" 
  id="fileInput" 
  accept=".html,text/html" 
  style="display:none"
/>

<script>
/* INIT EDITOR */
const textarea = document.getElementById("htmlCode");

const editor = CodeMirror.fromTextArea(textarea, {
    mode: "text/html",
    lineNumbers: true,
    autoCloseTags: true,
    lineWrapping: true
});

/* DEFAULT HTML TEMPLATE */
editor.setValue(`<!DOCTYPE html>
<html >
  <head>
    
  </head>
  <body>
  
  </body>
</html>`);
const iframe = document.getElementById("preview");

function updatePreview() {
    iframe.srcdoc = editor.getValue();
}

editor.on("change", updatePreview);
updatePreview();

/* SAVE FILE WITH FILENAME PROMPT */
document.getElementById("saveBtn").addEventListener("click", () => {
    let fileName = prompt("Enter file name", "index");

    if (!fileName) return;

    if (!fileName.endsWith(".html")) {
        fileName += ".html";
    }

    const content = editor.getValue();
    const blob = new Blob([content], { type: "text/html" });

    const link = document.createElement("a");
    link.href = URL.createObjectURL(blob);
    link.download = fileName;

    document.body.appendChild(link);
    link.click();

    document.body.removeChild(link);
    URL.revokeObjectURL(link.href);
});

/* OPEN HTML FILE */
const openBtn = document.getElementById("openBtn");
const fileInput = document.getElementById("fileInput");

openBtn.addEventListener("click", () => {
    fileInput.click();
});

fileInput.addEventListener("change", () => {
    const file = fileInput.files[0];
    if (!file) return;

    if (!file.name.endsWith(".html")) {
        alert("Please select an HTML file");
        return;
    }

    const reader = new FileReader();
    reader.onload = () => {
        editor.setValue(reader.result);
        updatePreview();
    };
    reader.readAsText(file);

    // Optional: remember filename
    localStorage.setItem("lastFileName", file.name.replace(".html", ""));
});

</script>



</body>
